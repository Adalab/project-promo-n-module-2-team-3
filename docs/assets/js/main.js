"use strict";const formElement=document.querySelector(".js_form"),inputTextAll=document.querySelectorAll(".js_text_type"),resultTextAll=document.querySelectorAll(".js_text_result"),inputLinkAll=document.querySelectorAll(".js_link_type"),resultLinkAll=document.querySelectorAll(".js_link_result");function text(){for(let e=0;e<inputTextAll.length;e++)""!==inputTextAll[e].value?resultTextAll[e].innerHTML=inputTextAll[e].value:"fullName"===inputTextAll[e].name?resultTextAll[e].innerHTML="Nombre Apellido":"job"===inputTextAll[e].name&&(resultTextAll[e].innerHTML="Front-End Developer")}function link(){resultLinkAll[0].href="tel: "+inputLinkAll[1].value,resultLinkAll[1].href="mailto:"+inputLinkAll[0].value,resultLinkAll[2].href="https://"+inputLinkAll[2].value,resultLinkAll[3].href="https://github.com/"+inputLinkAll[3].value}function updateAllInputs(){text(),link(),saveInLocalStorage()}formElement.addEventListener("keyup",updateAllInputs);const collapsableContentAll=document.querySelectorAll(".js_collapsable_content"),collapsableTitleList=document.querySelectorAll(".js_collapsable_title"),arrowAll=document.querySelectorAll(".js_arrow");function handleCollapsable(e){const t=e.currentTarget;console.log(t),t.classList.add("clicado");for(let e=0;e<collapsableContentAll.length;e++){let t=collapsableContentAll[e];!0===collapsableTitleList[e].classList.contains("clicado")?(t.classList.toggle("hidden"),arrowAll[e].classList.toggle("rotateArrowUp"),collapsableTitleList[e].classList.remove("clicado")):(collapsableTitleList[e].classList.remove("clicado"),t.classList.add("hidden"),arrowAll[e].classList.remove("rotateArrowUp"))}console.log(e.currentTarget)}for(let e of collapsableTitleList)e.addEventListener("click",handleCollapsable);const radioAll=document.querySelectorAll(".js_radio"),paletteResult=document.querySelector(".js_palette_result");let checkedPalette=0;function handlerPalette(){const e=parseInt(document.querySelector(".js_palettes:checked").value);paletteResult.classList.remove("palette_0","palette_1","palette_2"),paletteResult.classList.add("palette_"+e),saveInLocalStorage()}function listenerRadio(){for(const e of radioAll)e.addEventListener("click",handlerPalette)}listenerRadio();let photo="";const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){photo=fr.result,updatePhoto(),saveInLocalStorage()}function updatePhoto(){const e=photo;""!==e&&(profilePreview.style.backgroundImage=`url(${e})`,profileImage.style.backgroundImage=`url(${e})`),saveInLocalStorage()}function clearPhoto(){photo="",profilePreview.style.backgroundImage="",profileImage.style.backgroundImage=""}function getUserData(){return console.log(parseInt(document.querySelector(".js_palettes:checked").value)),{photo:photo,palette:parseInt(document.querySelector(".js_palettes:checked").value),name:document.querySelector(".js_name").value,job:document.querySelector(".js_job").value,email:document.querySelector(".js_email").value,phone:document.querySelector(".js_phone").value,linkedin:document.querySelector(".js_linkedin").value,github:document.querySelector(".js_github").value}}function saveInLocalStorage(){const e=getUserData(),t=JSON.stringify(e);localStorage.setItem("userData",t)}function getFromLocalStorage(){const e=localStorage.getItem("userData");if(null!==e){const t=JSON.parse(e);document.querySelector(".js_name").value=t.name,document.querySelector(".js_job").value=t.job,document.querySelector(".js_email").value=t.email,document.querySelector(".js_phone").value=t.phone,document.querySelector(".js_linkedin").value=t.linkedin,document.querySelector(".js_github").value=t.github,photo=t.photo;const l=document.querySelectorAll(".js_palettes");for(const e of l)parseInt(e.value)===t.palette&&(e.checked=!0);handlerPalette(),updatePhoto()}}fileField.addEventListener("change",getImage);const buttonShare=document.querySelector(".js_button_create"),cardResult=document.querySelector(".js-shareclick"),hiddenElement=document.querySelector(".js-hidden-box"),twitterHiddenElement=document.querySelector(".js-twitter-share");let shareLink="";const userData={palettes:"",name:"",job:"",photo:"",email:"",phone:"",linkedin:"",github:""};function handlerCreateCard(e){e.preventDefault(),fetchAPI(),buttonShare.classList.remove("share--button"),buttonShare.classList.add("share--button__dis"),buttonShare.disabled=!0,twitterHiddenElement.classList.remove("hidden")}function fetchAPI(){const e=getUserData();fetch("//profileawesome.herokuapp.com/card",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{const t=document.querySelector(".js-card-link");!0===e.success?(e.cardURL,shareLink=e.cardURL,t.innerHTML=`<a href="${shareLink}" class="shareclick__text js-shareclick" target="_blank">Pincha aqui para ver tu tarjeta AWESOME.</a>`,twitterHiddenElement.classList.remove("hidden")):(buttonShare.disabled=!1,twitterHiddenElement.classList.add("hidden"),hiddenElement.classList.remove("hidden"))})}buttonShare.addEventListener("click",handlerCreateCard);const reset=document.querySelector(".js_reset");function handleReset(e){e.preventDefault(),console.log("Hey reset")}function preventSubmit(e){e.preventDefault()}reset.addEventListener("click",handleReset),formElement.addEventListener("submit",preventSubmit),getFromLocalStorage(),updateAllInputs(),handlerPalette(),updatePhoto();